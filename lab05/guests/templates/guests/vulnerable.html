{% extends "base.html" %}
{% block title %}Уязвимая страница{% endblock %}
{% block content %}
<section class="card">
  <h1>Демонстрация исходной уязвимости</h1>
  <p class="note">
    Это копия мини-приложения из лабораторной №2. Здесь намеренно пропущена любая фильтрация и проверка сессии, поэтому XSS-атаки проходят без препятствий, а доступ к панели возможен при знании URL.
  </p>
  <form method="post" class="form-grid">
    {% csrf_token %}
    <input name="user" placeholder="Имя" />
    <input name="e_mail" placeholder="E-mail" />
    <textarea name="text_message" rows="4" placeholder="HTML вставляется без экранирования"></textarea>
    <button type="submit" class="button button--secondary">Сохранить как есть</button>
  </form>
</section>

<section class="card">
  <h2>Вывод без фильтрации</h2>
  {% for g in entries %}
    <div class="msg">
      <div class="meta">{{ g.user }} · {{ g.e_mail }} · {{ g.data_time_message|date:"d.m.Y H:i" }}</div>
      <div class="body">{{ g.text_message|safe }}</div>
    </div>
  {% empty %}
    <p>Записей пока нет.</p>
  {% endfor %}
</section>
{% endblock %}
